<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Home</title>

<style>
body {
    background:#0e0e0e;
    color:white;
    font-family:Arial, sans-serif;
    margin:0;
}

header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:16px 20px;
}

h1 {
    margin:0;
}

#search {
    background:#1b1b1b;
    border:none;
    color:white;
    padding:8px 12px;
    border-radius:8px;
    outline:none;
    width:220px;
}

.grid {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(160px,1fr));
    gap:20px;
    padding:20px;
}

.game {
    background:#1b1b1b;
    border-radius:12px;
    padding:12px;
    text-align:center;
    cursor:pointer;
}

.game:hover {
    background:#262626;
}

.game img {
    width:100%;
    height:120px;
    object-fit:cover;
    border-radius:8px;
}
</style>
</head>

<body>

<header>
    <h1>BbPLUS Unblocked - Home</h1>
    <input id="search" type="text" placeholder="Search games...">
</header>

<div class="grid" id="gameGrid">
    <div class="game" onclick="launch('library/SubmitGames.html')">
        <img src="icons/form.png">
        [[REQUEST A GAME]]
    </div>
    <div class="game" onclick="launch('library/Eag188.html')">
        <img src="icons/1.8.8.png">
        Eaglercraft 1.8.8
    </div>
    <div class="game" onclick="launch('library/Eag1122.html')">
        <img src="icons/1.12.png">
        Eaglercraft 1.12.2
    </div>
    <div class="game" onclick="launch('library/brainrot.html')">
        <img src="icons/brainrot.jpg">
        Steal A Brainrot Duel
    </div>
    <div class="game" onclick="launch('library/BasketBro.html')">
        <img src="icons/basketbro.png">
        Basket Bros
    </div>
    <div class="game" onclick="launch('library/Geometryvibe.html')">
        <img src="icons/geometry.jpg">
        Geometry Vibes
    </div>
    <div class="game" onclick="launch('library/retroB.html')">
        <img src="icons/retroB.png">
        Retro Bowl
    </div>
    <div class="game" onclick="launch('library/Soundboard.html')">
        <img src="icons/soundboard.png">
        Soundboard [FUNNY]
    </div>
    <div class="game" onclick="launch('library/bbplus.html')">
        <img src="icons/bbplus.png">
        Baldi's Basics +
    </div>
</div>

<script>
/* ---- ALPHABETICAL SORT ---- */
const grid = document.getElementById("gameGrid");
const games = Array.from(grid.children);

games
    .sort((a, b) =>
        a.textContent.trim().localeCompare(b.textContent.trim(), undefined, { sensitivity: "base" })
    )
    .forEach(game => grid.appendChild(game));

/* ---- SEARCH FILTER ---- */
document.getElementById("search").addEventListener("input", e => {
    const query = e.target.value.toLowerCase();

    games.forEach(game => {
        const name = game.textContent.toLowerCase();
        game.style.display = name.includes(query) ? "" : "none";
    });
});

/* ---- GAME LAUNCHER ---- */
async function launch(path) {
    const win = window.open("about:blank");
    if (!win) {
        alert("Popup blocked");
        return;
    }

    try {
        const res = await fetch(path);
        const html = await res.text();

        win.document.open();
        win.document.write(html);
        win.document.close();
    } catch {
        win.document.write("<h1>Failed to load game</h1>");
    }
}
</script>

</body>
</html>
